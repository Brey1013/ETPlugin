"use strict";(function(e){function t(t){e("input[type=hidden][name=order_by]").val(t.currentTarget.value),e(".et-search-form form input[type=submit]").trigger("click")}function n(){e(".et-submit-advert-form [name='go-to-cart']").on("click",function(t){var n=e(".et-submit-advert-form").serialize().split("&").map(e=>e.split("=")).filter(e=>-1==["action","quality","price-type","availability"].indexOf(e[0]));if(0==n.filter(e=>e[1]).length){t.preventDefault(),t.stopPropagation();const{cartUrl:e}=t.currentTarget.dataset;window.location.href=e}})}function a(t){t.preventDefault();const n=e("a[data-reveal]");for(var r=0;r<n.length;r++){const t=e(n[r]),o=t.data("reveal"),i=atob(o);t.attr("href",i),t.text(i.split(":").splice(1).join("")),t.off("click",a)}}function r(){const t=t=>{var n=e("#sub-category").data("first");if(e("#sub-category").html(`<option value="">${n}</option>`),t){let n=e("#category").find('option[value="'+t+'"]').data("options");void 0!==n&&(n=JSON.parse(atob(n)),e(n).each(function(t,n){e("#sub-category").append(`<option value="${n.term_id}">${n.name}</option>`)}))}if(!0===e("#sub-category").data("show-other")){var a=e("#other_subcat_wrap").hasClass("d-none");e("#sub-category").append(`<option value="Other" ${a?"":"selected"}>Other</option>`)}e("#sub-category").select2(),"Other"==t?e("#other_cat_wrap").removeClass("d-none"):e("#other_cat_wrap").addClass("d-none")};e("#category").on("change",n=>{let a=e(n.currentTarget).val();t(a)}),e("#sub-category").on("change",function(t){let n=e(this).val();"Other"==n?e("#other_subcat_wrap").removeClass("d-none"):e("#other_subcat_wrap").addClass("d-none")});const n=new URLSearchParams(window.location.search),a=n.get("category"),r=n.get("sub_category");a&&t(a),r&&(e("#sub-category").val(r),e("#sub-category").trigger("change"))}function o(){var t=e(".js-typeahead"),n=function(t){return function(n,a){var r;r=[];var o=new RegExp(n,"i");e.each(t,function(e,t){o.test(t)&&r.push(t)}),a(r)}};t.each(function(t,a){const{mustSelectItem:r,options:o}=a.dataset;for(var s=JSON.parse(atob(o))||[],c=0;c<s.length;c++)s[c]=i(s[c]);e(a).typeahead({hint:!0,highlight:!0,minLength:1},{name:"states",source:n(s)})})}function i(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}function s(){e(".dropdown ul input").on("keyup",function(){var t=e(this).val().toLowerCase();e(this).parent().children("li").filter(function(){e(this).toggle(e(this).text().toLowerCase().indexOf(t)>-1)})}),e("ul.dropdown-menu li").on("click",function(){e(this).parent().parent().find(".btn input").val(e(this).text())})}function c(){var t=".main-category .collapse",n=".category-filter";e(t).on("show.bs.collapse",function(){e(n).val()}),e(t).on("hidden.bs.collapse",function(){})}function l(){e(".category-filter").on("keyup",function(){clearTimeout(v),v=setTimeout(()=>{var t=e(this).val().toLowerCase();e(".main-category").each(function(){var n=e(this);n.find(".collapse").parent().parent().removeClass("d-none");var a=n.find(".btn").text().toLowerCase(),r=n.find(".sub-categories a"),o=a.includes(t),i=!1;r.each(function(){var n=e(this),a=n.text().toLowerCase(),r=a.includes(t);n.parent().toggle(r),r&&(i=!0)}),n.toggle(o||i),""===t?n.find(".collapse").collapse("hide"):i&&n.find(".collapse").collapse("show")})},100)})}function d(){var t="#categoryCollapse",n=".category-main-header",a=".collapse-icon",r="fa-chevron-up",o="fa-chevron-down";e(t).on("show.bs.collapse",function(){e(n).find(a).removeClass(o).addClass(r)}),e(t).on("hidden.bs.collapse",function(){e(n).find(a).removeClass(r).addClass(o)})}function u(){const e=document.getElementById("brand-logo"),t=document.getElementById("brand-logo-image");e&&e.addEventListener("change",function(){if(this.files&&this.files[0]){const e=new FileReader;e.onload=function(e){t.src=e.target.result,t.classList.remove("d-none")},e.readAsDataURL(this.files[0])}})}function p(){const e=document.getElementById("clear-brand-logo"),t=document.querySelector(".brand-logo-preview"),n=document.getElementById("brand-logo"),a=document.getElementById("brand-logo-image");t&&(t.addEventListener("mouseover",function(){"#"!==a.src&&e.classList.remove("d-none")}),t.addEventListener("mouseout",function(){e.classList.add("d-none")})),e&&e.addEventListener("click",function(){a.src="#",a.classList.add("d-none"),this.classList.add("d-none"),n.value=""})}function g(){e("#spec-sheets").on("change",function(){return this.files.length>3?(alert("You can only select up to 3 documents."),this.value="",!1):e('input[name="specsheets[]"]').length+this.files.length>3?(alert("You can only select up to 3 documents."),this.value="",!1):(Array.from(this.files).forEach(e=>{E.push(e)}),void m())})}function m(){let t=e("#file-tags");t.empty(),E.forEach((n,a)=>{let r=e("<span>").addClass("align-items-center badge badge-light badge-pill d-flex gap-2 justify-content-center m-2 mw-100 p-0"),o=new FileReader;o.onload=function(t){let n=t.target.result,a=e("<input>").attr({type:"hidden",name:"specsheets[]",value:n});r.append(a)},o.readAsDataURL(n);e("<span>").addClass("mb-0 pl-3 spec-sheet-label").text(n.name).appendTo(r);let i=e("<button>").addClass("btn border-0 pr-3").html('<i class="fas fa-times fa-xs"></i>').on("click",function(e){r.remove(),E.splice(a,1)});r.append(i),t.append(r)})}function f(){0==document.getElementById("gallery-preview").childElementCount?document.getElementById("gallery-images").setAttribute("required","required"):document.getElementById("gallery-images").removeAttribute("required")}function h(){e("[name=add-to-cart\\[\\]]").on("change",function(){e("[name=add-to-cart\\[\\]]").is(":checked")?e("[name=my-listings-form-submit]").removeAttr("disabled"):e("[name=my-listings-form-submit]").attr("disabled","disabled")})}let v;e(function(){r(),o(),s(),c(),l(),d(),u(),p(),g(),h(),e(".original-specsheets-button").on("click",function(t){t.preventDefault(),e(t.currentTarget.parentElement).remove()}),e(".et-searchable-dropdown").select2();let i=e(".progress-bar").attr("data-percent");i=100-parseInt(i),e(".progress-bar__inner").css({width:i+"%"}),e('input[name="featured"]').on("click",function(t){var n=e(this);1==n.data("waschecked")?(n.prop("checked",!1),n.data("waschecked",!1)):n.data("waschecked",!0),n.siblings('input[name="rad"]').data("waschecked",!1)}),e("#price-type").on("change",function(t){var n="Entered Price"===t.currentTarget.value;n?(e("#price-value-block").removeClass("d-none"),e("#price-value").attr("required","required")):(e("#price-value-block").addClass("d-none"),e("#price-value").removeAttr("required"))});const m=document.getElementById("gallery-images");m&&m.addEventListener("change",y),e("a[data-reveal]").on("click",a),e(".searchandfilter input[type='reset']").on("click",function(){setTimeout(function(){e(".et-searchable-dropdown").trigger("change")},100)}),n(),e("select[name='order_by']").on("change",t)});const y=t=>{if(e('input[name="images[]"]').length>=10)return alert("You have reached limit of 10 images."),t.currentTarget.value="",!1;{const a=t.currentTarget.files;if(a.length>10)return alert("You can only select up to 10 images."),t.currentTarget.value="",!1;if(e('input[name="images[]"]').length+a.length>10)return alert("You can only select up to 10 images."),t.currentTarget.value="",!1;const r=document.getElementById("gallery-preview").childElementCount;for(var n=0;n<a.length;n++){const e=a[n],t=r+n,o=w(t),i=document.createElement("input");i.setAttribute("name","images[]"),i.setAttribute("value",""),i.setAttribute("type","hidden"),document.getElementById("file-preview-"+t).appendChild(i),f(),o.readAsDataURL(e)}t.currentTarget.value=""}},b=e=>{const t=document.getElementById("gallery-preview");t.removeChild(document.getElementById(e.target.id)),f()},w=e=>{const t=new FileReader,n=document.createElement("img");return n.classList.add("col-3"),n.classList.add("p-1"),n.setAttribute("id","file-preview-"+e),n.addEventListener("click",b),document.getElementById("gallery-preview").appendChild(n),t.onload=function(t){n.setAttribute("src",t.target.result);const a=document.querySelector("#file-preview-"+e+" input[type='hidden']");a.setAttribute("value",t.target.result)},t};var E=[]})(jQuery);