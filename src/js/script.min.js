function setupETPlugin(){function e(){f(".et-submit-advert-form [name='go-to-cart']").on("click",function(e){var t=f(".et-submit-advert-form").serialize().split("&").map(e=>e.split("=")).filter(e=>-1==["action","quality","price-type","availability"].indexOf(e[0]));if(0==t.filter(e=>e[1]).length){e.preventDefault(),e.stopPropagation();const{cartUrl:t}=e.currentTarget.dataset;window.location.href=t}})}function t(e){e.preventDefault();const n=f("a[data-reveal]");for(var a=0;a<n.length;a++){const e=f(n[a]),o=e.data("reveal"),r=atob(o);e.attr("href",r),e.text(r.split(":").splice(1).join("")),e.off("click",t)}}function n(){const e=e=>{var t=f("#sub-category").data("first");if(f("#sub-category").html(`<option value="">${t}</option>`),e){let t=f("#category").find('option[value="'+e+'"]').data("options");void 0!==t&&(t=JSON.parse(atob(t)),f(t).each(function(e,t){f("#sub-category").append(`<option value="${t.term_id}">${t.name}</option>`)})),"true"===f("#sub-category").data("show-other")&&f("#sub-category").append('<option value="Other">Other</option>'),f("#sub-category").select2()}"Other"==e?f("#other_cat_wrap").removeClass("d-none"):f("#other_cat_wrap").addClass("d-none")};f("#category").on("change",t=>{let n=f(t.currentTarget).val();e(n)}),f("#sub-category").on("change",function(e){let t=f(this).val();"Other"==t?f("#other_subcat_wrap").removeClass("d-none"):f("#other_other_subcat_wrapcat_wrap").addClass("d-none")});const t=new URLSearchParams(window.location.search),n=t.get("category"),a=t.get("sub_category");n&&e(n),a&&(f("#sub-category").val(a),f("#sub-category").trigger("change"))}function a(){var e=f(".js-typeahead"),t=function(e){return function(t,n){var a;a=[],substrRegex=new RegExp(t,"i"),f.each(e,function(e,t){substrRegex.test(t)&&a.push(t)}),n(a)}};e.each(function(e,n){const{mustSelectItem:a,options:r}=n.dataset;for(var i=JSON.parse(atob(r))||[],s=0;s<i.length;s++)i[s]=o(i[s]);f(n).typeahead({hint:!0,highlight:!0,minLength:1},{name:"states",source:t(i)})})}function o(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}function r(){f(".dropdown ul input").on("keyup",function(){var e=f(this).val().toLowerCase();f(this).parent().children("li").filter(function(){f(this).toggle(f(this).text().toLowerCase().indexOf(e)>-1)})}),f("ul.dropdown-menu li").on("click",function(){f(this).parent().parent().find(".btn input").val(f(this).text())})}function i(){var e=".main-category .collapse",t=".category-filter";f(e).on("show.bs.collapse",function(){f(t).val()}),f(e).on("hidden.bs.collapse",function(){})}function s(){f(".category-filter").on("keyup",function(){clearTimeout(h),h=setTimeout(()=>{var e=f(this).val().toLowerCase();f(".main-category").each(function(){var t=f(this);t.find(".collapse").parent().parent().removeClass("d-none");var n=t.find(".btn").text().toLowerCase(),a=t.find(".sub-categories a"),o=n.includes(e),r=!1;a.each(function(){var t=f(this),n=t.text().toLowerCase(),a=n.includes(e);t.parent().toggle(a),a&&(r=!0)}),t.toggle(o||r),""===e?t.find(".collapse").collapse("hide"):r&&t.find(".collapse").collapse("show")})},100)})}function c(){var e="#categoryCollapse",t=".category-main-header",n=".collapse-icon",a="fa-chevron-up",o="fa-chevron-down";f(e).on("show.bs.collapse",function(){f(t).find(n).removeClass(o).addClass(a)}),f(e).on("hidden.bs.collapse",function(){f(t).find(n).removeClass(a).addClass(o)})}function l(){const e=document.getElementById("brand-logo"),t=document.getElementById("brand-logo-image");e&&e.addEventListener("change",function(){if(this.files&&this.files[0]){const e=new FileReader;e.onload=function(e){t.src=e.target.result,t.classList.remove("d-none")},e.readAsDataURL(this.files[0])}})}function d(){const e=document.getElementById("clear-brand-logo"),t=document.querySelector(".brand-logo-preview"),n=document.getElementById("brand-logo"),a=document.getElementById("brand-logo-image");t&&(t.addEventListener("mouseover",function(){"#"!==a.src&&e.classList.remove("d-none")}),t.addEventListener("mouseout",function(){e.classList.add("d-none")})),e&&e.addEventListener("click",function(){a.src="#",a.classList.add("d-none"),this.classList.add("d-none"),n.value=""})}function u(){f("#spec-sheets").on("change",function(){return this.files.length>=3?(alert("You can only select up to 3 documents."),this.value="",!1):f('input[name="specsheets[]"]').length+this.files.length>3?(alert("You can only select up to 3 documents."),this.value="",!1):(Array.from(this.files).forEach(e=>{w.push(e)}),void p())})}function p(){let e=f("#file-tags");e.empty(),w.forEach((t,n)=>{let a=f("<span>").addClass("badge badge-pill badge-light m-2 p-0 d-flex gap-2 align-items-center justify-content-center"),o=new FileReader;o.onload=function(e){let t=e.target.result,n=f("<input>").attr({type:"hidden",name:"specsheets[]",value:t});a.append(n)},o.readAsDataURL(t);f("<p>").addClass("mb-0 pl-3").text(t.name).appendTo(a);let r=f("<button>").addClass("btn border-0 pr-3").html('<i class="fas fa-times fa-xs"></i>').on("click",function(){a.remove(),w.splice(n,1)});a.append(r),e.append(a)})}function g(){0==document.getElementById("gallery-preview").childElementCount?document.getElementById("gallery-images").setAttribute("required","required"):document.getElementById("gallery-images").removeAttribute("required")}function m(){f("[name=add-to-cart\\[\\]]").on("change",function(){f("[name=add-to-cart\\[\\]]").is(":checked")?f("[name=my-listings-form-submit]").removeAttr("disabled"):f("[name=my-listings-form-submit]").attr("disabled","disabled")})}const f=jQuery;let h;f(function(){n(),a(),r(),i(),s(),c(),l(),d(),u(),m(),f(".et-searchable-dropdown").select2();let o=f(".progress-bar").attr("data-percent");o=100-parseInt(o),f(".progress-bar__inner").css({width:o+"%"}),f('input[name="featured"]').on("click",function(e){var t=f(this);1==t.data("waschecked")?(t.prop("checked",!1),t.data("waschecked",!1)):t.data("waschecked",!0),t.siblings('input[name="rad"]').data("waschecked",!1)}),f("#price-type").on("change",function(e){var t="Entered Price"===e.currentTarget.value;t?(f("#price-value-block").removeClass("d-none"),f("#price-value").attr("required","required")):(f("#price-value-block").addClass("d-none"),f("#price-value").removeAttr("required"))});const p=document.getElementById("gallery-images");p&&p.addEventListener("change",v),f("a[data-reveal]").on("click",t),f(".searchandfilter input[type='reset']").on("click",function(){setTimeout(function(){f(".et-searchable-dropdown").trigger("change")},100)}),e()});const v=e=>{if(f('input[name="images[]"]').length>=10)return alert("You have reached limit of 10 images."),e.currentTarget.value="",!1;{const n=e.currentTarget.files;if(n.length>=10)return alert("You can only select up to 10 images."),e.currentTarget.value="",!1;if(f('input[name="images[]"]').length+n.length>10)return alert("You can only select up to 10 images."),e.currentTarget.value="",!1;const a=document.getElementById("gallery-preview").childElementCount;for(var t=0;t<n.length;t++){const e=n[t],o=a+t,r=b(o),i=document.createElement("input");i.setAttribute("name","images[]"),i.setAttribute("value",""),i.setAttribute("type","hidden"),document.getElementById("file-preview-"+o).appendChild(i),g(),r.readAsDataURL(e)}e.currentTarget.value=""}},y=e=>{const t=document.getElementById("gallery-preview");t.removeChild(document.getElementById(e.target.id)),g()},b=e=>{const t=new FileReader,n=document.createElement("img");return n.classList.add("col-3"),n.classList.add("p-1"),n.setAttribute("id","file-preview-"+e),n.addEventListener("click",y),document.getElementById("gallery-preview").appendChild(n),t.onload=function(t){n.setAttribute("src",t.target.result);const a=document.querySelector("#file-preview-"+e+" input[type='hidden']");a.setAttribute("value",t.target.result)},t};var w=[]}setupETPlugin();